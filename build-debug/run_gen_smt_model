#!/bin/bash

#echo "**** Compile ethos"
#make -j4

STD_SMODEL_OUT=../plugins/model_smt/model_smt_gen.eo

TMP_OUT=model-$1

echo "**** run_gen_model: Run ethos + desugar on $1 to generate $STD_SMODEL_OUT"
./src/ethos --plugin.model-smt $1
cp $STD_SMODEL_OUT $TMP_OUT
cp $1 $STD_SMODEL_OUT
cat $TMP_OUT >> $STD_SMODEL_OUT
rm -rf $TMP_OUT

echo "**** run_gen_model: Verify it parses"
./src/ethos $STD_SMODEL_OUT
