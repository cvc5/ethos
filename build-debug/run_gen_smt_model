#!/bin/bash
echo "**** Compile ethos"
make -j4

STD_SMODEL_OUT=../plugins/model_smt/model_smt_gen.eo

SMODEL_OUT=model-$1

echo "**** run_gen_vc: Run ethos + desugar on $1 to generate $SMODEL_OUT"
./src/ethos --plugin.model-smt $1 >/dev/null
cp $1 $SMODEL_OUT
cat $STD_SMODEL_OUT >> $SMODEL_OUT

echo "**** run_gen_vc: Verify it parses"
./src/ethos $SMODEL_OUT
